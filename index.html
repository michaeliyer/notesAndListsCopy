<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>notesAndListsCopy</title>

    <link href="css/main.css" rel="stylesheet" type="text/css" />
    <link href="css/notepad.css" rel="stylesheet" type="text/css" />
    <link href="css/modals.css" rel="stylesheet" type="text/css" />
    <link href="css/sections.css" rel="stylesheet" type="text/css" />
    <link href="css/buttons.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <!-- 📝 Notepad (always visible) -->
    <div id="notepad" contenteditable="true" spellcheck="true">
      Start writing your journal, poetry, dreams...
    </div>

    <!-- 🧰 Notepad Controls (initially hidden) -->
    <div id="notepadControls" class="controls hidden">
      <button id="clearNotepadBtn">🧹 Clear</button>
      <button id="downloadNotepadBtn">📤 Export</button>
      <label class="import-label"
        >📥 Import
        <input type="file" id="notepadImport" accept=".txt,.json" hidden />
      </label>
      <button id="openNotepadStyleBtn">🎨 Notepad Style</button>
    </div>

    <!-- 🎨 Notepad Style Modal -->
    <div id="notepadStyleModal" class="modal hidden">
      <div class="modal-content">
        <h3>Customize Notepad</h3>

        <label for="notepadFontFamily">Font:</label>
        <select id="notepadFontFamily"></select>

        <label for="notepadFontSize">Font Size (px):</label>
        <input
          type="number"
          id="notepadFontSize"
          value="16"
          min="8"
          max="100"
        />

        <label for="notepadTextColor">Text Color:</label>
        <input type="color" id="notepadTextColor" value="#000000" />

        <label for="notepadBgColor">Background Color:</label>
        <input type="color" id="notepadBgColor" value="#ffffff" />

        <button id="applyNotepadStyle">✅ Apply</button>
        <button id="closeNotepadStyle">❌ Cancel</button>
      </div>
    </div>

    <!-- 🗂 List Controls (initially hidden) -->
    <div id="listControls" class="controls hidden">
      <button id="addSectionBtn">➕ Add Section</button>
      <button id="exportDataBtn">📤 Export Sections</button>
      <label class="import-label"
        >📥 Import Sections
        <input type="file" id="importFile" accept=".json" hidden />
      </label>
    </div>

    <!-- Toggle Buttons (always visible) -->
    <div class="buttonWrapper">
      <button id="toggleNotepadBtn" class="floating-toggle notepadHider">
        📝 Show Notepad
      </button>
      <button id="toggleListBtn" class="floating-toggle listHider">
        🗂 Show List
      </button>
      <button
        id="toggleNotepadControlsBtn"
        class="floating-toggle notepadControl"
      >
        🧰 Show Notepad Controls
      </button>
      <button id="toggleListControlsBtn" class="floating-toggle listControl">
        🧺 Show List Controls
      </button>
    </div>
    <!-- Checklist Section Container -->
    <div id="sectionsContainer"></div>

    <!-- Modals -->
    <div id="bodyModal" class="modal hidden"></div>
    <div id="styleModal" class="modal hidden"></div>
    <div id="completedStyleModal" class="modal hidden"></div>

    <!-- Modular JS (deferred) -->
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/notepad.js"></script>
    <script type="module" src="js/notepadStyle.js"></script>
    <script type="module" src="js/sections.js"></script>
    <script type="module" src="js/sectionStyle.js"></script>
    <script type="module" src="js/modals.js"></script>
    <script type="module" src="js/storage.js"></script>

    <!-- Direct toggle script for notepad -->
    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Direct access to toggle button and notepad
        const toggleBtn = document.getElementById("toggleNotepadBtn");
        const notepad = document.getElementById("notepad");

        if (toggleBtn && notepad) {
          console.log("Direct toggle script loaded");

          // Initially hide notepad
          notepad.classList.add("hidden");
          toggleBtn.textContent = "📝 Show Notepad";

          // Set up direct toggle listener
          toggleBtn.addEventListener("click", function () {
            console.log("Direct toggle clicked");

            if (notepad.classList.contains("hidden")) {
              notepad.classList.remove("hidden");
              toggleBtn.textContent = "📝 Hide Notepad";
              console.log("Notepad shown");
            } else {
              notepad.classList.add("hidden");
              toggleBtn.textContent = "📝 Show Notepad";
              console.log("Notepad hidden");
            }
          });
        }
      });
    </script>
  </body>
</html>
